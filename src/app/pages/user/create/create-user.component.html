<div class="grid">
    <div class="col-12 md:col-12">
        <div class="card">
            <form
                [formGroup]="createForm"
                #form="ngForm"
                (ngSubmit)="onSubmit()"
            >
                <h5>Crea utente</h5>
                <div class="p-fluid p-formgrid grid">
                    <div class="field col-12 md:col-6">
                        <label htmlFor="username1">Username</label>
                        <input
                            pInputText
                            id="username1"
                            placeholder="username"
                            type="text"
                            formControlName="username"
                            (input)="
                                createForm.controls.username.setValue(
                                    createForm.controls.username.value.toLowerCase()
                                )
                            "
                            ngModel
                        />
                    </div>
                    <div class="field col-12 md:col-6">
                        <label htmlFor="password1">Password</label>

                        <p-password
                            formControlName="password"
                            ngModel
                            [toggleMask]="true"
                        ></p-password>
                    </div>
                    <div class="field col-12 md:col-4">
                        <label htmlFor="name1">Nome</label>
                        <input
                            pInputText
                            id="name1"
                            type="text"
                            placeholder="Nome"
                            formControlName="name"
                            ngModel
                        />
                    </div>
                    <div class="field col-12 md:col-4">
                        <label htmlFor="surname1">Cognome</label>
                        <input
                            pInputText
                            id="surname1"
                            type="text"
                            placeholder="Cognome"
                            formControlName="surname"
                            ngModel
                        />
                    </div>
                    <div class="field col-12 md:col-4">
                        <label htmlFor="email1">Email</label>
                        <input
                            pInputText
                            id="email1"
                            type="text"
                            placeholder="Email"
                            formControlName="email"
                            (input)="
                                createForm.controls.email.setValue(
                                    createForm.controls.email.value.toLowerCase()
                                )
                            "
                            ngModel
                        />
                        <div
                            *ngIf="
                                createForm.controls['email'].invalid &&
                                (createForm.controls['email'].dirty ||
                                    createForm.controls['email'].touched)
                            "
                            class="alert"
                        >
                            <div
                                *ngIf="
                                    createForm.controls['email'].errors[
                                        'pattern'
                                    ]
                                "
                            >
                                <small class="p-error"
                                    >Email address is invalid</small
                                >
                            </div>
                        </div>
                    </div>
                    <div class="field col-12 md:col-4">
                        <label htmlFor="fiscalCode1">Codice fiscale</label>
                        <input
                            pInputText
                            id="fiscalCode1"
                            type="text"
                            placeholder="Codice fiscale"
                            formControlName="fiscalCode"
                            ngModel
                        />
                    </div>
                    <div class="field col-12 md:col-4">
                        <label htmlFor="user1">Ruolo</label>
                        <p-dropdown
                            [options]="roles"
                            optionLabel="label"
                            optionValue="id"
                            placeholder="Seleziona un ruolo"
                            [showClear]="true"
                            formControlName="roleId"
                            [(ngModel)]="selectedRole"
                        ></p-dropdown>
                    </div>
                    <div class="field col-12 md:col-4">
                        <label htmlFor="user1">Azienda</label>
                        <p-dropdown
                            [options]="companies"
                            optionLabel="name"
                            optionValue="id"
                            placeholder="Seleziona un azienda"
                            [showClear]="true"
                            formControlName="companyId"
                            [(ngModel)]="selectedCompany"
                        ></p-dropdown>
                    </div>
                    <div class="field col-12 md:col-4">
                        <label htmlFor="workerNumber1">Numero lavoratore</label>
                        <input
                            pInputText
                            id="workerNumber1"
                            type="text"
                            placeholder="Numero lavoratore"
                            formControlName="workerNumber"
                            ngModel
                        />
                    </div>
                    <div class="field col-12 md:col-4">
                        <label htmlFor="position1">Posizione</label>
                        <input
                            pInputText
                            id="position1"
                            type="text"
                            placeholder="Posizione"
                            formControlName="position"
                            ngModel
                        />
                    </div>
                    <div class="field col-12 md:col-4">
                        <label htmlFor="status1">Attiva/Disattiva</label> <br />
                        <p-inputSwitch formControlName="status"></p-inputSwitch>
                    </div>
                </div>
                <div
                    class="flex justify-content-center align-items-center gap-2"
                >
                    <button
                        pButton
                        pRipple
                        type="submit"
                        class="p-button-success"
                        label="Crea"
                        icon="pi pi-plus"
                        [disabled]="!createForm.valid"
                    ></button>
                </div>
                <div>
                    {{ createForm.value | json }}
                </div>
            </form>
        </div>
    </div>
</div>
